# Chapter 21: Agents & Skills

[English](./README.md) | **한국어**

## 이 챕터에서 배우는 것

- Agents로 전문 도우미 만들기
- Skills로 특정 작업 자동화
- 실용적인 활용 예시

---

## 왜 필요한가요?

**실제 상황**: 다른 작업에 다른 "성격"을 원하게 됩니다. 코드 리뷰할 때는 엄격한 시니어 개발자처럼, 디버깅할 때는 인내심 있는 선생님처럼 동작하기를 원합니다. Commands만으로는 Claude에게 지속적인 정체성을 줄 수 없습니다.

Agents와 Skills는 역할과 자동화된 워크플로우를 정의할 수 있게 해줍니다.

### 쉬운 비유: 직원 vs 업무 절차

다음과 같이 생각해보시기 바랍니다:
- **Agents**는 다른 업무에 다른 직원을 고용하는 것과 같습니다
  - 보안 담당: 항상 위협을 감시
  - 문서 작성자: 명확하게 설명
  - 코드 리뷰어: 버그를 찾고 개선점 제안

- **Skills**는 표준 운영 절차와 같습니다
  - "반품 처리 방법" (고객이 "반품"이라고 하면 트리거)
  - "이슈 에스컬레이션 방법" ("긴급"이 언급되면 트리거)

### Agent vs Skill: 빠른 결정 가이드

```
일관된 성격/관점이 필요한가요?
  --> AGENT 사용 (@이름으로 호출)

일관된 프로세스/절차가 필요한가요?
  --> SKILL 사용 (키워드로 자동 트리거)

둘 다 필요한가요?
  --> 조합하십시오. @에이전트-이름과 스킬 키워드
```

---

## 구체적인 비교: Agent vs Skill

같은 작업을 두 가지 방식으로 처리하는 걸 봅시다:

### 코드 리뷰 - Agent로

```markdown
<!-- .claude/agents/strict-reviewer.md -->
# 엄격한 코드 리뷰어

## 정체성
당신은 모든 버그를 봐온 15년차 시니어 개발자입니다.
꼼꼼하지만 건설적입니다.

## 관점
- 모든 줄에 버그가 있을 수 있다고 가정
- 보안 취약점 체크
- 성능 영향 질문
- 엣지 케이스 검증
```

**사용법:** `> @strict-reviewer 이 함수 확인해줘`

Agent는 리뷰 내내 Claude에게 **지속적인 성격**을 부여합니다.

### 코드 리뷰 - Skill로

```markdown
<!-- .claude/skills/review-checklist.md -->
# 코드 리뷰 체크리스트

## 트리거 키워드
"리뷰", "코드 확인", "이거 봐줘"

## 프로세스
1. 모든 함수 식별
2. 각각 체크: null 처리, 에러 케이스, 타입
3. 심각도별 이슈 목록
4. 요약 제공
```

**사용법:** `> 이 함수 리뷰해줘`

Skill은 자동으로 실행되는 **고정된 프로세스**를 정의합니다.

### 언제 뭘 쓸까?

| 시나리오 | 사용 | 이유 |
|----------|------|-----|
| "보안 전문성이 필요해" | Agent | 지속적인 관점 |
| "우리 표준 리뷰 체크리스트 실행해" | Skill | 일관된 프로세스 |
| "시니어 보안 전문가가 우리 리뷰해줘" | 둘 다 | 양쪽의 장점 |

---

## 왜 Agents와 Skills를 알아야 할까?

Commands는 프롬프트를 저장하는 것입니다. Agents와 Skills는 한 단계 더 나아갑니다:

- **Agents**: 특정 역할을 하는 전문 Claude
- **Skills**: 특정 키워드에 반응하는 자동화

---

## Agents 시스템

Agents는 특정 역할에 최적화된 Claude입니다.

### Agents 폴더 구조

```
.claude/
└── agents/
    ├── code-reviewer.md   # 코드 리뷰 전문가
    ├── doc-writer.md      # 문서 작성 전문가
    └── tester.md          # 테스트 전문가
```

### Agent 정의하기

```markdown
<!-- .claude/agents/code-reviewer.md -->
# 코드 리뷰 전문가

## 역할
당신은 시니어 개발자입니다. 코드 리뷰를 전문으로 합니다.

## 관점
- 버그와 취약점 찾기
- 성능 문제 식별
- 가독성 개선 제안
- 베스트 프랙티스 적용 확인

## 리뷰 형식
1. 심각도별 이슈 분류 (Critical, Major, Minor)
2. 각 이슈에 대한 구체적 개선 제안
3. 잘된 부분도 언급

## 톤
건설적이고 교육적으로. 비난하지 않고 개선 방향 제시.
```

### Agent 사용하기

```
> @code-reviewer 이 PR 리뷰해줘
```

`@`로 Agent를 호출합니다.

### 이것을 알면 무엇이 좋을까요?

**일관된 리뷰 품질:**

매번 같은 관점으로 리뷰하므로 놓치는 부분이 없습니다.

**역할에 맞는 응답:**

일반 Claude와 다르게 특정 관점에서만 답변합니다.

---

## 실용적인 Agents 예시

### 1. 문서화 전문가

```markdown
<!-- .claude/agents/doc-writer.md -->
# 문서화 전문가

## 역할
기술 문서를 명확하고 이해하기 쉽게 작성합니다.

## 원칙
- 간결하게 (불필요한 설명 제거)
- 예시 포함 (코드 예시 필수)
- 구조적으로 (제목, 소제목 활용)

## 문서 형식
- README: 프로젝트 개요, 설치, 사용법
- API 문서: 엔드포인트, 파라미터, 응답
- 가이드: 단계별 설명

## 언어
한글로 작성, 영어 기술용어는 그대로 사용
```

```
> @doc-writer 이 API에 대한 문서 작성해줘
```

### 2. 테스트 전문가

```markdown
<!-- .claude/agents/tester.md -->
# 테스트 전문가

## 역할
견고한 테스트 코드를 작성합니다.

## 테스트 전략
- 단위 테스트 우선
- 엣지 케이스 반드시 포함
- 모킹 최소화

## 테스트 구조
```
describe('함수명', () => {
  it('정상 케이스', () => {})
  it('에러 케이스', () => {})
  it('엣지 케이스', () => {})
})
```

## 도구
- Jest (기본)
- React Testing Library (컴포넌트)
- MSW (API 모킹)
```

```
> @tester 이 함수에 대한 테스트 작성해줘
```

### 3. 리팩토링 전문가

```markdown
<!-- .claude/agents/refactorer.md -->
# 리팩토링 전문가

## 역할
기존 코드를 개선합니다. 동작은 유지하면서 품질을 높입니다.

## 리팩토링 원칙
- 작은 단위로 진행
- 각 단계에서 테스트 통과 확인
- 변경 이유 설명

## 우선순위
1. 중복 제거
2. 함수 분리 (20줄 이하)
3. 네이밍 개선
4. 복잡도 감소

## 주의
- 기능 추가는 리팩토링이 아님
- 한 번에 너무 많이 바꾸지 않기
```

```
> @refactorer 이 컴포넌트 리팩토링해줘
```

### 4. 보안 전문가

```markdown
<!-- .claude/agents/security.md -->
# 보안 전문가

## 역할
코드의 보안 취약점을 찾고 개선 방안을 제시합니다.

## 체크리스트
- SQL 인젝션
- XSS (크로스 사이트 스크립팅)
- CSRF
- 인증/인가 취약점
- 민감 정보 노출

## 보고 형식
1. 취약점 설명
2. 공격 시나리오
3. 해결 방법
4. 예방 코드

## 심각도
- Critical: 즉시 수정 필요
- High: 빠른 수정 필요
- Medium: 계획적 수정
- Low: 권장 사항
```

```
> @security 이 API 보안 검토해줘
```

---

## Skills 시스템

Skills는 특정 키워드에 자동으로 반응하는 기능입니다.

### Skills 폴더 구조

```
.claude/
└── skills/
    ├── pr-review.md      # PR 관련 요청에 반응
    ├── deploy.md         # 배포 관련 요청에 반응
    └── debug.md          # 디버깅 관련 요청에 반응
```

### Skill 정의하기

Skills는 frontmatter(메타데이터)를 사용해서 더 정교하게 설정할 수 있습니다:

```markdown
<!-- .claude/skills/pr-review.md -->
---
name: PR Review
description: Pull Request 리뷰 및 코드 분석
allowed-tools: [Read, Glob, Grep, Bash]
model: sonnet
---

# PR 리뷰 스킬

## 키워드
- "PR 리뷰"
- "pull request 확인"
- "코드 리뷰"
- "review this PR"

## 동작
1. git diff로 변경사항 확인
2. 변경된 파일별 분석
3. 이슈 식별 및 제안
4. 전체 요약 제공

## 출력 형식
### 요약
- 변경 파일 수
- 추가/삭제 라인
- 주요 변경 내용

### 상세 리뷰
[파일별 리뷰]

### 전체 평가
[통과/수정 필요]
```

### Skill 사용하기

키워드를 포함해서 요청하면 자동으로 Skill이 활성화됩니다:

```
> 이 PR 리뷰해줘
```

"PR 리뷰" 키워드가 있으므로 자동으로 PR 리뷰 Skill이 동작합니다.

### 이것을 알면 무엇이 좋을까요?

**자연스러운 자동화:**

키워드만 포함하면 자동으로 적절한 동작을 수행합니다.

**일관된 프로세스:**

같은 키워드에 항상 같은 방식으로 처리합니다.

---

## 실용적인 Skills 예시

### 1. 디버깅 스킬

```markdown
<!-- .claude/skills/debug.md -->
# 디버깅 스킬

## 키워드
- "에러"
- "버그"
- "안 돼"
- "안 되"
- "오류"
- "고장"
- "실패"

## 동작
1. 에러 메시지 분석
2. 관련 코드 찾기
3. 원인 파악
4. 해결 방법 제시

## 진행 순서
- 에러 메시지 그대로 읽기
- 스택 트레이스 분석
- 관련 파일 확인
- 단계별 해결 시도
```

```
> 로그인할 때 에러 나
```

자동으로 디버깅 프로세스가 시작됩니다.

### 2. 배포 스킬

```markdown
<!-- .claude/skills/deploy.md -->
# 배포 스킬

## 키워드
- "배포"
- "deploy"
- "프로덕션"
- "production"
- "릴리즈"

## 체크리스트
- [ ] 테스트 통과?
- [ ] 빌드 성공?
- [ ] 환경변수 설정?
- [ ] 마이그레이션 필요?

## 동작
1. 현재 상태 확인
2. 체크리스트 검증
3. 배포 명령 실행
4. 결과 확인
```

```
> 스테이징에 배포해줘
```

자동으로 배포 체크리스트를 확인하고 진행합니다.

### 3. 성능 분석 스킬

```markdown
<!-- .claude/skills/performance.md -->
# 성능 분석 스킬

## 키워드
- "느려"
- "성능"
- "최적화"
- "slow"
- "performance"

## 분석 항목
- 렌더링 횟수 (React)
- 불필요한 재계산
- 메모리 누수
- API 호출 최적화
- 번들 크기

## 동작
1. 느린 부분 식별
2. 원인 분석
3. 최적화 방법 제안
4. 적용 후 비교
```

```
> 이 페이지 왜 이렇게 느려?
```

자동으로 성능 분석을 시작합니다.

---

## Agents vs Skills

### 언제 뭘 쓸까?

```
┌─────────────────────────────────────────────────────────────────┐
│                    Agents vs Skills                              │
├──────────────────────────────┬──────────────────────────────────┤
│           Agents             │           Skills                  │
├──────────────────────────────┼──────────────────────────────────┤
│ @로 명시적 호출               │ 키워드로 자동 활성화              │
│ 역할/관점 정의               │ 프로세스/절차 정의               │
│ 전문가 페르소나              │ 자동화된 워크플로우              │
│ 예: @code-reviewer           │ 예: "PR 리뷰" 언급 시 자동 동작   │
└──────────────────────────────┴──────────────────────────────────┘
```

### 조합해서 사용하기

```
> @security 이 PR 리뷰해줘
```

- `@security`: 보안 전문가 관점 (Agent)
- "PR 리뷰": PR 리뷰 프로세스 (Skill)

보안 전문가 관점에서 PR 리뷰 프로세스를 실행합니다.

---

## 팀에서 공유하기

### Git에 커밋

```
my-project/
├── .claude/
│   ├── agents/       # 팀 공통 Agents
│   │   ├── code-reviewer.md
│   │   └── doc-writer.md
│   └── skills/       # 팀 공통 Skills
│       ├── pr-review.md
│       └── deploy.md
├── CLAUDE.md
└── src/
```

### 팀 표준 문서화

```markdown
# 팀 Agents & Skills

## Agents
- `@code-reviewer` - 코드 리뷰 전문가
- `@doc-writer` - 문서화 전문가
- `@security` - 보안 전문가

## Skills (자동 활성화)
- "PR 리뷰" - PR 리뷰 프로세스
- "배포" - 배포 체크리스트
- "에러" - 디버깅 프로세스
```

---

## 따라해보십시오

### 실습 1: 첫 Agent 만들기

1. agents 폴더 만들기: `mkdir -p .claude/agents`
2. `.claude/agents/teacher.md` 만들기:

```markdown
# 인내심 있는 선생님

## 역할
당신은 코딩 개념을 설명하는 인내심 있는 선생님입니다.
항상 쉬운 말로 예시를 들어 설명합니다.

## 스타일
- 큰 그림부터 시작
- 비유 사용
- 코드 예시 제공
- 이해했는지 확인
```

3. 사용하기: `> @teacher 재귀가 뭔지 설명해줘`

### 실습 2: 첫 Skill 만들기

1. skills 폴더 만들기: `mkdir -p .claude/skills`
2. `.claude/skills/explain.md` 만들기:

```markdown
# 코드 설명 스킬

## 키워드
"설명해", "이게 뭐야", "어떻게 작동해"

## 프로세스
1. 코드 읽기
2. 주요 목적 파악
3. 단계별로 분해
4. 간단한 요약 제공
```

3. 테스트: `> 이 함수가 무엇을 하는지 설명해 주세요` (스킬이 자동으로 트리거됩니다)

### 실습 3: Agent + Skill 조합

```
> @teacher 이 함수가 무엇을 하는지 설명해 주세요
```

선생님 에이전트의 성격 + 설명 스킬의 프로세스 = 양쪽의 장점을 얻을 수 있습니다.

---

## 문제가 발생하면?

### 문제: Agent를 찾을 수 없습니다

**가능한 원인:**
1. 파일이 `.claude/agents/` 폴더에 없음
2. 파일이 `.md`로 끝나지 않음
3. 잘못된 이름 사용 (.md 없는 파일명이 이름)

**해결 방법:**
- 폴더 확인: `ls -la .claude/agents/`
- `@teacher` 에이전트는 `teacher.md` 파일 필요
- 대소문자 구분: `@Teacher`와 `@teacher`는 다름

### 문제: Skill이 트리거되지 않습니다

**가능한 원인:**
1. 키워드가 요청과 일치하지 않음
2. 스킬 파일이 잘못됨
3. skills 폴더가 잘못된 위치에 있음

**해결 방법:**
- 키워드가 입력한 것과 정확히 일치하는지 확인
- skills 폴더는 `.claude/skills/`여야 함
- 스킬 파일의 정확한 키워드로 테스트

### 문제: Agent 성격이 일관되지 않습니다

**가능한 원인:**
1. 에이전트 정의가 너무 모호함
2. 상충되는 지시사항
3. 긴 대화에서 컨텍스트가 희석됨

**해결 방법:**
- 에이전트 성격 설명을 구체적으로
- 모순되는 지시사항 피하기
- 필요하면 `/clear`로 컨텍스트 리셋

---

## 자주 하는 실수

1. **Agent를 너무 포괄적으로 만들기**
   - 나쁨: "당신은 도움이 되는 어시스턴트입니다" (너무 일반적)
   - 좋음: "당신은 타입 안전성에 집중하는 TypeScript 전문가입니다" (구체적)

2. **Skill을 너무 모호하게 만들기**
   - 나쁨: "도와줘" 같은 키워드 (모든 것에 트리거)
   - 좋음: "스테이징에 배포" 같은 구체적인 키워드

3. **Agent와 Command 혼동**
   - Commands: 저장된 프롬프트 실행
   - Agents: Claude에게 지속적인 성격 부여
   - 관점이 중요할 때 Agent 사용

4. **팀과 공유하는 것 잊기**
   - `.claude/agents/`와 `.claude/skills/`를 git에 커밋
   - README에 뭐가 있는지 문서화

5. **공유 전에 테스트하지 않기**
   - 공유 전에 에이전트와 스킬 테스트
   - 엣지 케이스에서 문제가 드러나는 경우가 많음

---

## 정리

이번 챕터에서 배운 것:
- [x] Agents로 전문 역할 정의
- [x] Skills로 키워드 기반 자동화
- [x] Agents와 Skills 차이
- [x] 실용적인 활용 예시
- [x] 팀에서 공유하기

**핵심 포인트**: Agents는 "누구처럼", Skills는 "무엇을"에 집중합니다.

다음 챕터에서는 MCP로 외부 서비스와 연동하는 방법을 배웁니다.

[Chapter 22: MCP 연동](../Chapter22/README.ko.md)으로 넘어가시기 바랍니다.
