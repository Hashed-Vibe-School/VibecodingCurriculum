# Chapter 08: 코드 편집하기

[English](./README.md) | **한국어**

## 이 챕터에서 배우는 것

- Claude에게 코드 수정 시키기
- 안전하게 편집하기
- 피드백으로 개선하기

---

## 왜 필요합니까?

에세이를 쓴다고 상상해보십시오. 모든 문장을 직접 타이핑하는 대신, 조수에게 원하는 것을 말하면 대신 써줍니다. 검토하고, 수정 사항을 제안하면, 수정해줍니다.

Claude로 코드 편집도 똑같이 작동합니다. 원하는 것을 설명하면, Claude가 코드를 쓰고, 검토하고 다듬으면 됩니다.

**실제 상황 예시:**
- 새 기능을 추가하고 싶은데 어떻게 구현해야 할지 모름
- 코드에 버그가 있어서 빨리 고쳐야 함
- 지저분한 코드를 더 깔끔하게 리팩토링하고 싶음
- 배우는 중이라 어떻게 작성해야 하는지 보고 싶음

**페어 프로그래머가 있다고 생각하십시오:**
- 전통적인 코딩: 모든 것을 직접 타이핑
- Claude와 함께: 원하는 것을 설명하면, Claude가 타이핑하고, 가이드하고 승인

---

## 코드 편집의 기본

Claude Code는 직접 코드를 수정할 수 있습니다. 복사-붙여넣기 없이 파일을 바로 고칩니다.

### 간단한 예시

```
> @index.html 제목을 "내 웹사이트"로 바꿔줘
```

Claude가 파일을 열고, 수정하고, 저장합니다.

### 수정 내용 확인

수정 전에 Claude가 변경 내용을 보여줍니다:

```diff
- <h1>Hello World</h1>
+ <h1>내 웹사이트</h1>
```

- 빨간색 (-): 삭제되는 부분
- 초록색 (+): 추가되는 부분

괜찮으면 `Allow`, 싫으면 `Deny`를 선택합니다.

---

## 권장 워크플로우: 탐색 → 계획 → 실행

Anthropic에서 권장하는 방법입니다.

### 1단계: 탐색 (Explore)

먼저 코드를 이해합니다.

```
> @src/login.js 이 파일이 뭐 하는 파일이야?
```

### 2단계: 계획 (Plan)

수정 계획을 세웁니다.

```
> 여기에 비밀번호 검증 기능 추가하고 싶어.
> 어떻게 하면 좋을까? 코드 작성하지 말고 계획만.
```

### 3단계: 실행 (Code)

계획대로 수정합니다.

```
> 좋아, 그 계획대로 수정해줘.
```

### 4단계: 확인

잘 되는지 확인합니다.

```
> 테스트 돌려서 확인해줘.
```

**왜 이렇게 합니까?**

LLM은 요청을 받으면 학습한 패턴 중 가장 적절해 보이는 것을 선택합니다. 하지만 "비밀번호 검증"이라는 요청에도 여러 구현 방식이 있습니다 (정규식, 라이브러리, 커스텀 로직 등). 계획을 먼저 확인하면:
- Claude가 어떤 방향으로 가려는지 미리 알 수 있습니다
- 의도와 다르면 코드 작성 전에 수정할 수 있습니다

---

## 피드백으로 개선하기

첫 결과가 완벽하지 않아도 괜찮습니다. 피드백을 주면 개선할 수 있습니다.

### 예시

```
> 로그인 폼 만들어줘
```

결과가 나왔는데 마음에 안 들면:

```
> 에러 메시지가 너무 딱딱해. 친절하게 바꿔줘.
```

```
> 버튼이 너무 작아. 크기 키워줘.
```

2-3번 피드백 주면 훨씬 좋아집니다.

---

## 되돌리기

잘못됐으면 되돌릴 수 있습니다.

| 단축키 | 하는 일 |
|--------|---------|
| `Esc` | 현재 작업 중단 |
| `Esc Esc` | 이전 상태로 되돌리기 |
| `Ctrl + C` | 완전히 취소 |

### 예시

Claude가 이상한 방향으로 가고 있으면:

```
# Esc Esc 누르고
> 아, 그거 말고. 다시 설명할게.
> 기존 로그인 로직은 유지하고, OAuth만 추가해줘.
```

---

## 좋은 편집 요청 vs 나쁜 요청

### 나쁜 예

```
> 버그 고쳐줘
```
뭘 고쳐야 하는지 모릅니다.

### 좋은 예

```
> @src/utils.js의 validateEmail 함수에서
> "test@" 같은 잘못된 이메일도 통과시키는 버그가 있어.
> 도메인 부분에 점(.)이 있는지 확인하도록 고쳐줘.
```

### 더 좋은 예 (기존 패턴 참조)

```
> @src/utils.js에 validatePhone 함수 추가해줘.
> @src/utils.js의 validateEmail이랑 비슷한 스타일로.
```

기존 코드를 참조하면 일관된 스타일로 작성해줍니다.

---

## TDD 스타일: 테스트 먼저

테스트를 먼저 작성하면 Claude가 정확히 뭘 만들어야 하는지 압니다.

### 예시

```
# 1단계: 테스트 먼저
> formatDate 함수 테스트 작성해줘.
> "2024-01-15"를 넣으면 "2024년 1월 15일"이 나와야 해.
> 빈 문자열 넣으면 에러 나야 하고.

# 2단계: 테스트 실행 (실패 확인)
> 테스트 돌려봐.

# 3단계: 구현
> 이제 테스트 통과하게 함수 만들어줘.

# 4단계: 다시 확인
> 테스트 다시 돌려봐.
```

---

## 리팩토링 패턴

### 함수 추출

```
> @src/App.js에서 50-70줄의 검증 로직을
> validateForm 함수로 분리해줘.
```

### 이름 변경

```
> getUserData 함수를 fetchUserProfile로 이름 바꿔줘.
> 모든 파일에서.
```

### 파일 이동

```
> @src/utils/helpers.js를
> @src/lib/helpers.js로 옮겨줘.
> import 문도 다 업데이트해줘.
```

---

## 안전하게 편집하기

### Git 활용

큰 수정 전에 커밋해두십시오.

```
> 지금 상태로 커밋해줘. 리팩토링 시작 전 백업.
```

문제가 생기면:

```
> 뭔가 잘못됐어. 마지막 커밋으로 되돌려줘.
```

### 권한 모드 활용

- **Plan 모드**: 탐색할 때 (수정 불가)
- **Normal 모드**: 배울 때 (매번 확인)
- **Accept Edits**: 익숙해졌을 때 (자동 승인)

---

## 실습해보기

### 실습 1: 기본 편집

```
# 파일 만들기
> hello.html 만들어줘. "Hello World" 보여주는 페이지.

# 수정하기
> 제목을 "안녕하세요"로 바꿔줘.

# 추가하기
> 버튼 추가해줘. 클릭하면 alert 나오게.
```

### 실습 2: 탐색 → 계획 → 실행

```
# 탐색
> @package.json 이 프로젝트 뭐 하는 프로젝트야?

# 계획
> 사용자 프로필 기능 추가하고 싶어. 계획 세워줘.

# 실행
> 1단계부터 시작하자.
```

### 실습 3: 피드백으로 개선

```
> 간단한 계산기 HTML 만들어줘.

# 첫 결과 보고
> 디자인이 너무 단순해. 예쁘게 꾸며줘.

# 다시 보고
> 버튼이 너무 작아. 크기 키워줘.
```

---

## 미니 프로젝트: 코드 리팩토링

실제 코드를 리팩토링하면서 편집 기술을 익혀보십시오.

### 목표

- 코드 편집 기술 익히기
- 리팩토링 패턴 경험하기

### 준비: 샘플 코드 만들기

```
> 아래 코드를 legacy.js로 만들어줘:
> - 100줄 정도의 복잡한 코드
> - 중복 코드가 있고
> - 함수 이름이 불명확하고
> - 주석이 없는 코드
```

### 리팩토링하기

```
> @legacy.js 이 코드 분석해줘. 개선할 점이 뭐야?

> 중복 코드를 함수로 분리해줘

> 함수 이름을 의미있게 바꿔줘

> 필요한 곳에 주석 추가해줘
```

### 심화 과제 (숙련자용)

```
> 이 코드를 ES6+ 문법으로 모던화해줘

> TypeScript로 변환해줘. 타입도 제대로 추가하고.

> 단위 테스트 추가해줘. 각 함수마다.
```

### 도전 과제

오픈소스 프로젝트에서 실제 리팩토링 해보기:

```bash
git clone https://github.com/sindresorhus/ora.git
cd ora
claude
```

```
> 이 프로젝트에서 개선할 수 있는 부분 찾아줘
> 하나 골라서 리팩토링 계획 세워줘
```

---

## 따라해보기

지금 바로 코드 편집을 연습해봅시다:

### 연습 1: 간단한 파일 만들고 편집하기

```
# 파일 만들기
> greeting.js 파일 만들어줘. "Hello World" 말하는 함수로

# Claude가 만든 것 확인하고, 수정
> "Hello, [이름]"으로 바꿔줘. 이름은 파라미터로

# 더 추가
> "Goodbye, [이름]" 말하는 함수도 추가해줘
```

### 연습 2: 탐색-계획-실행 흐름

```
# 1단계: 탐색
> @package.json 이 프로젝트 뭐 하는 프로젝트야?

# 2단계: 계획
> 다크 모드 토글 추가하고 싶어. 어떻게 하면 좋을까? 아직 코드 작성하지 마.

# 3단계: 실행
> 좋아 보여. 1단계부터 시작하자.

# 4단계: 검토
> 실행해서 잘 되는지 보여줘.
```

### 연습 3: 점진적 개선

```
> 간단한 문의 폼 HTML로 만들어줘

# 결과 보고
> 폼이 너무 밋밋해. CSS 추가해서 전문적으로 보이게 해줘.

# 결과 보고
> 제출 버튼이 더 크고 파란색이었으면 좋겠어.

# 결과 보고
> 폼 검증 추가해줘 - 이메일에 @가 있어야 하고 메시지는 비어있으면 안 돼.
```

---

## 문제가 발생하면

**Claude가 원하지 않는 변경을 했습니까?**
- 즉시 `Esc Esc` 눌러서 되돌리기
- 이렇게 말하기: "그거 취소해. 내가 원한 건 [실제로 원했던 것]"

**편집 후 뭔가 망가졌습니까?**
- 편집 전에 커밋했는지 확인 (Git 사용하십시오)
- 이렇게 말하기: "뭔가 망가졌어. 마지막 커밋으로 되돌려줘."

**Claude가 잘못된 파일을 수정합니까?**
- 구체적으로: "@src/components/Button.js 이 파일 수정해"
- 올바른 경로를 말하고 있는지 확인하십시오

**변경이 맞아 보이는데 저장이 안 됐습니까?**
- Claude가 권한 물어볼 때 "Allow" 선택했는지 확인하십시오
- 시도: "[파일명]에 변경사항 저장해줘"

**Claude가 계속 원치 않는 것을 합니까?**
- CLAUDE.md에 추가: "인라인 스타일 절대 사용하지 마"
- 명시적으로: "새 의존성 추가하지 마"

---

## 자주 하는 실수

### 실수 1: 변경사항 검토 안 하기
```
# 나쁜 예 - 보지도 않고 다 수락
> 이거 더 좋게 해줘
[Claude가 20줄 변경]
[읽지도 않고 Allow 클릭]

# 좋은 예 - 수락 전에 검토
> 이거 더 좋게 해줘
[Claude가 diff 보여줌]
[diff를 주의 깊게 읽음]
[뭔가 잘못된 것 발견]
> 잠깐, 15번 줄 바꾸지 마. 그 부분은 유지해.
```

### 실수 2: 계획 단계 건너뛰기
```
# 나쁜 예 - 바로 코딩으로 점프
> 내 앱에 사용자 인증 추가해줘

# 좋은 예 - 먼저 계획
> /plan
> 사용자 인증 추가하고 싶어. 가장 좋은 접근법이 뭐야?
> [계획 검토]
> 좋아 보여. 시작하자.
```

### 실수 3: 모호한 편집 요청
```
# 나쁜 예
> 버그 고쳐줘

# 좋은 예
> @src/login.js에서 로그인 버튼이 작동 안 해.
> 클릭하면 loginUser 함수를 호출해야 해.
> 현재는 아무 일도 안 일어나.
```

### 실수 4: 안전을 위해 Git 안 쓰기
```
# 나쁜 예 - 안전망 없음
> 전체 코드베이스 리팩토링해줘
[뭔가 망가짐, 복구 방법 없음]

# 좋은 예 - 먼저 커밋
> 현재 변경사항 "리팩토링 전 백업"으로 커밋해줘
> 이제 utils 폴더 리팩토링해줘
[뭔가 망가짐]
> 백업 커밋으로 되돌려줘
```

### 실수 5: 한 번에 너무 많이 수정하기
```
# 나쁜 예
> 이 파일 전체를 TypeScript로 다시 작성해줘

# 좋은 예
> 먼저, 함수 파라미터에만 TypeScript 타입 추가해줘
> [검토]
> 이제 반환 값에 타입 추가해줘
> [검토]
> 이제 user 객체에 인터페이스 추가해줘
```

---

## 정리

이번 챕터에서 배운 것:
- [x] Claude에게 코드 수정 시키기
- [x] 탐색 → 계획 → 실행 워크플로우
- [x] 피드백으로 개선하기
- [x] 되돌리기
- [x] 안전하게 편집하기

[Chapter 09: Git 기초](../Chapter09/README.ko.md)로 넘어가십시오.
