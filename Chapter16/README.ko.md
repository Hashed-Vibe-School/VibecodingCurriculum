# Chapter 16: 데이터 처리

[English](./README.md) | **한국어**

## 이 챕터에서 배우는 것

- 파일 다루기 (CSV, JSON)
- 데이터 변환하기
- 자동화 스크립트 만들기

---

## 왜 데이터 처리인가?

코딩의 많은 부분은 데이터를 다루는 것입니다:
- 엑셀 파일 정리
- 여러 파일 합치기
- 형식 변환 (CSV → JSON)
- 반복 작업 자동화

Claude에게 시키면 이런 작업을 빠르게 할 수 있습니다!

---

## 파일 형식 이해하기

### CSV (엑셀 같은 것)

쉼표로 구분된 데이터:
```csv
이름,나이,도시
홍길동,25,서울
김철수,30,부산
```

### JSON (구조화된 데이터)

프로그래밍에서 많이 쓰는 형식:
```json
[
  {"이름": "홍길동", "나이": 25, "도시": "서울"},
  {"이름": "김철수", "나이": 30, "도시": "부산"}
]
```

---

## CSV 다루기

### CSV 읽기

```
> data.csv 파일 읽어서 내용 보여줘
```

### CSV → JSON 변환

```
> data.csv를 data.json으로 변환해줘
```

Claude가 만드는 코드:
```javascript
const fs = require('fs')

// CSV 읽기
const csv = fs.readFileSync('data.csv', 'utf-8')
const lines = csv.split('\n')
const headers = lines[0].split(',')

// JSON으로 변환
const data = lines.slice(1).map(line => {
  const values = line.split(',')
  return headers.reduce((obj, header, i) => {
    obj[header] = values[i]
    return obj
  }, {})
})

// 저장
fs.writeFileSync('data.json', JSON.stringify(data, null, 2))
```

### CSV 필터링

```
> data.csv에서 나이가 30 이상인 사람만 추출해서
> 새 파일로 저장해줘
```

---

## JSON 다루기

### JSON 읽고 수정하기

```
> config.json의 port 값을 3000에서 8080으로 바꿔줘
```

### 여러 JSON 합치기

```
> data1.json이랑 data2.json을 하나로 합쳐줘
```

### JSON 정리하기

```
> 이 JSON 예쁘게 정리해줘 (들여쓰기 적용)
```

---

## 실전 프로젝트: 데이터 정리 도구

### 상황

이런 지저분한 CSV가 있다고 합니다:

```csv
이름,전화번호,이메일
홍길동 ,  010-1234-5678, hong@email.com
 김철수,01098765432,KIM@EMAIL.COM
박영희,  010.5555.6666  ,park@email
```

### 목표

- 공백 제거
- 전화번호 형식 통일
- 이메일 소문자로 변환
- 잘못된 이메일 표시

### 만들기

```
> CSV 정리 도구 만들어줘.
> - 앞뒤 공백 제거
> - 전화번호는 010-0000-0000 형식으로
> - 이메일은 소문자로
> - 이메일 형식 검증
```

### 결과

```csv
이름,전화번호,이메일,유효성
홍길동,010-1234-5678,hong@email.com,OK
김철수,010-9876-5432,kim@email.com,OK
박영희,010-5555-6666,park@email,잘못된 이메일
```

---

## 파일 일괄 처리

### 여러 파일 한 번에 처리

```
> data 폴더의 모든 CSV 파일을 JSON으로 변환해줘
```

### 파일 이름 일괄 변경

```
> images 폴더의 모든 파일 이름 앞에 "2024_" 붙여줘
```

### 폴더 정리

```
> downloads 폴더에서
> - 이미지는 images 폴더로
> - 문서는 docs 폴더로
> - 나머지는 others 폴더로
> 분류해줘
```

---

## 자동화 스크립트

### 매일 하는 작업 자동화

```
> 매일 아침 실행할 스크립트 만들어줘:
> 1. data 폴더의 어제 날짜 파일 찾기
> 2. 데이터 정리하기
> 3. 결과를 report 폴더에 저장
> 4. 요약 통계 출력
```

### 예시: 백업 스크립트

```
> 프로젝트 백업 스크립트 만들어줘.
> - 중요 파일만 (node_modules 제외)
> - 날짜별 폴더에 저장
> - 7일 지난 백업은 삭제
```

---

## 데이터 분석

### 기본 통계

```
> sales.csv 파일 분석해줘:
> - 총 판매액
> - 평균 판매액
> - 가장 많이 팔린 상품
> - 월별 판매 추이
```

### 시각화

```
> 분석 결과를 차트로 보여줘
```

Claude가 Chart.js나 다른 라이브러리로 그래프를 만들어줍니다.

---

## 웹 스크래핑 기초

### 주의사항

- 웹사이트 이용약관 확인
- 너무 많은 요청 자제
- robots.txt 준수

### 간단한 스크래핑

```
> 이 웹페이지에서 상품 가격 목록 추출해줘:
> [URL]
```

### 데이터 저장

```
> 추출한 데이터를 CSV로 저장해줘
```

---

## 실습: 자동화 도구 만들기

### 기본 과제

```
# 과제 1: 파일 변환기
> CSV ↔ JSON 변환하는 도구 만들어줘.
> 드래그앤드롭으로 파일 넣으면 변환.

# 과제 2: 데이터 정리기
> 엑셀에서 복사한 데이터 붙여넣으면
> 정리해서 보여주는 도구 만들어줘.
```

### 추가 도전

```
# 이미지 리사이저
> 폴더의 모든 이미지를 특정 크기로 줄이는 도구

# 로그 분석기
> 서버 로그 파일 분석해서 요약 보여주는 도구

# 중복 파일 찾기
> 폴더에서 중복된 파일 찾아서 목록 보여주는 도구
```

---

## 유용한 라이브러리

### Node.js

| 라이브러리 | 용도 |
|-----------|------|
| `csv-parser` | CSV 읽기 |
| `json2csv` | JSON → CSV |
| `glob` | 파일 패턴 검색 |
| `sharp` | 이미지 처리 |
| `cheerio` | 웹 스크래핑 |

### Python

| 라이브러리 | 용도 |
|-----------|------|
| `pandas` | 데이터 분석 |
| `openpyxl` | 엑셀 처리 |
| `beautifulsoup4` | 웹 스크래핑 |
| `pillow` | 이미지 처리 |

```
> pandas로 CSV 분석하는 예시 보여줘
```

---

## 에러 처리

### 파일이 없을 때

```javascript
const fs = require('fs')

try {
  const data = fs.readFileSync('data.csv', 'utf-8')
} catch (error) {
  if (error.code === 'ENOENT') {
    console.log('파일을 찾을 수 없습니다')
  }
}
```

### 잘못된 형식

```
> CSV 파싱 중 에러가 나면 해당 줄은 건너뛰고
> 어떤 줄에서 에러났는지 로그 남겨줘
```

---

## 미니 프로젝트: 데이터 대시보드

데이터를 수집하고 시각화하는 대시보드를 만들어보세요!

### 목표

- 데이터 처리 자동화
- 시각화

### 만들기

```
> 판매 데이터 대시보드 만들어줘.
> - CSV 파일 업로드
> - 데이터 정리 및 분석
> - 차트로 시각화 (막대, 라인, 파이)
> - 요약 통계 표시
```

### 심화 과제 (숙련자용)

```
> 정기적으로 데이터 수집하는 크론잡 만들어줘

> 실시간 데이터 업데이트 기능 추가해줘

> PDF 리포트 자동 생성 기능 만들어줘

> 이상 데이터 자동 감지 알림 기능 추가해줘
```

---

## 정리

이번 챕터에서 배운 것:
- [x] CSV, JSON 파일 다루기
- [x] 데이터 변환하기
- [x] 일괄 처리하기
- [x] 자동화 스크립트 만들기
- [x] 데이터 분석 기초

다음 챕터에서는 외부 API를 연동하는 방법을 배웁니다.

[Chapter 17: API 연동](../Chapter17/README.ko.md)으로 넘어가세요.
